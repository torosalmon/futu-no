{"version":3,"sources":["blog/wp-content/themes/futu-no/js/script.js"],"names":["supportsPassive","opts","Object","defineProperty","get","window","addEventListener","requestAnimationFrame","mozRequestAnimationFrame","webkitRequestAnimationFrame","msRequestAnimationFrame","document","e","$body","getElementsByTagName","$header","$drawer","getElementsByClassName","color_accent","getComputedStyle","borderTopColor","color_sub","$meta_accent_color","querySelector","menu","_classCallCheck","this","scroll_header","drawer","share_overlay","search_form","_createClass","key","value","event_interval","toggle","classList","add","remove","offset","passive","contains","$toggle","setAttribute","style","background_scroll","arg_state","timer","setInterval","pageYOffset","body","scrollHeight","innerHeight","scrollTo","scrollBy","$open","html_upgrade","smooth_scroll","source_highlight","inline_playing_video","trigger","header","duration","delay","easing","verticalScroll","horizontalScroll","stopScroll","beforeScroll","afterScroll","cancelScroll","$video","i","length"],"mappings":"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","file":"script.js","sourcesContent":["/*!\r\n * *****************************************************************************\r\n * [futu-no JavaScript]\r\n * @URL:     http://trs.mn/blog/futu-no/\r\n * @License: MIT License\r\n * *****************************************************************************\r\n!*/\r\n\r\n// =============================================================================\r\n// init\r\n// =============================================================================\r\n\r\n// Passive Event Listeners - Feature Detection\r\nvar supportsPassive = false;\r\ntry {\r\n  var opts = Object.defineProperty({}, 'passive', {\r\n    get: function() {\r\n      supportsPassive = true;\r\n    }\r\n  });\r\n  window.addEventListener('test', null, opts);\r\n}\r\ncatch(e) {}\r\n\r\n// requestAnimationFrame - Vendor Prefix\r\nlet requestAnimationFrame = window.requestAnimationFrame || window.mozRequestAnimationFrame || window.webkitRequestAnimationFrame || window.msRequestAnimationFrame;\r\nwindow.requestAnimationFrame = requestAnimationFrame;\r\n\r\n// =============================================================================\r\n// DOMContentLoaded\r\n// =============================================================================\r\n\r\ndocument.addEventListener('DOMContentLoaded', function(e) {\r\n  'use strict';\r\n\r\n  // ==============\r\n  // グローバル変数\r\n  // ==============\r\n\r\n  const $body   = document.getElementsByTagName('body')[0];\r\n  const $header = document.getElementsByTagName('header')[0];\r\n  const $drawer = document.getElementsByClassName('drawer')[0];\r\n\r\n  // ============\r\n  // テーマカラー\r\n  // ============\r\n\r\n  // <header> border-top-colorからアクセントカラーを取得\r\n  let color_accent = getComputedStyle($header);\r\n      color_accent = color_accent.borderTopColor;\r\n\r\n  // <.drawer> background-colorからサブカラーを取得\r\n  let color_sub = getComputedStyle($drawer);\r\n      color_sub = color_sub.backgroundColor;\r\n\r\n  // テーマカラーセット\r\n  let $meta_accent_color = document.querySelector('meta[name=\"theme-color\"]');\r\n      $meta_accent_color.setAttribute('content', color_accent);\r\n\r\n// =============================================================================\r\n// メニュー\r\n// =============================================================================\r\n\r\n  class menu {\r\n\r\n    constructor() {\r\n      this.scroll_header();\r\n      this.drawer();\r\n      this.share_overlay();\r\n      this.search_form();\r\n    }\r\n\r\n    // ===============================\r\n    // ヘッダー スクロール表示切り替え\r\n    // ===============================\r\n\r\n    scroll_header() {\r\n      const offset = 80; // 起動させるスクロール座標\r\n\r\n      window.addEventListener('scroll', event_interval, supportsPassive ? { passive: true } : false);\r\n      document.addEventListener('touchmove', event_interval, supportsPassive ? { passive: true } : false);\r\n\r\n      function event_interval() {\r\n        window.requestAnimationFrame(toggle);\r\n      }\r\n\r\n      // 表示切り替え\r\n      function toggle() {\r\n        if(window.pageYOffset > offset) {\r\n          $body.classList.add('show-scroll-header');\r\n        }\r\n        else {\r\n          $body.classList.remove('show-scroll-header');\r\n        }\r\n      }\r\n      toggle();\r\n    }\r\n\r\n    // ========\r\n    // ドロワー\r\n    // ========\r\n\r\n    drawer() {\r\n\r\n      // ============\r\n      // ドロワー開閉\r\n      // ============\r\n\r\n      const $toggle = document.getElementsByClassName('js-drawer-toggle')[0];\r\n      $toggle.addEventListener('click', function() {\r\n        if(!$body.classList.contains('show-drawer')) {\r\n          $body.classList.remove('show-search-form');\r\n          $body.classList.add('show-drawer');\r\n\r\n          $meta_accent_color.setAttribute('content', color_sub);\r\n          $header.style.borderTopColor = color_sub;\r\n        }\r\n        else {\r\n          $body.classList.remove('show-drawer');\r\n\r\n          $meta_accent_color.setAttribute('content', color_accent);\r\n          $header.style.borderTopColor = color_accent;\r\n        }\r\n      }, false);\r\n    }\r\n\r\n    // ================\r\n    // 共有オーバーレイ\r\n    // ================\r\n\r\n    share_overlay() {\r\n\r\n      // ================\r\n      // オーバーレイ開閉\r\n      // ================\r\n\r\n      const $open = document.getElementsByClassName('js-share-overlay-open')[0];\r\n      $open.addEventListener('click', function() {\r\n        $body.classList.add('show-share-overlay');\r\n\r\n        // 背景スクロール開始\r\n        background_scroll('start');\r\n      }, false);\r\n\r\n      const $close = document.getElementsByClassName('js-share-overlay-close')[0];\r\n      $close.addEventListener('click', function() {\r\n        $body.classList.remove('show-share-overlay');\r\n\r\n        // 背景スクロール停止\r\n        background_scroll('stop');\r\n      }, false);\r\n\r\n      // ==================\r\n      // 背景スクロール演出\r\n      // ==================\r\n\r\n      let timer;\r\n\r\n      function background_scroll(arg_state) {\r\n\r\n        // 開始\r\n        if(arg_state === 'start') {\r\n          timer = setInterval(function() {\r\n            if(window.pageYOffset === document.body.scrollHeight - window.innerHeight) {\r\n              window.scrollTo(0, 0);\r\n            }\r\n            else {\r\n              window.scrollBy(0, 1);\r\n            }\r\n          }, 30);\r\n        }\r\n\r\n        // 停止\r\n        else if(arg_state === 'stop') {\r\n          clearInterval(timer);\r\n        }\r\n      }\r\n\r\n    }\r\n\r\n    // ============\r\n    // 検索フォーム\r\n    // ============\r\n\r\n    search_form() {\r\n\r\n      // ============\r\n      // フォーム開閉\r\n      // ============\r\n\r\n      const $open = document.getElementsByClassName('js-search-form-open')[0];\r\n      $open.addEventListener('click', function() {\r\n        $body.classList.remove('show-drawer');\r\n        $body.classList.add('show-search-form');\r\n\r\n        $meta_accent_color.setAttribute('content', color_sub);\r\n        $header.style.borderTopColor = color_sub;\r\n      }, false);\r\n\r\n      const $close = document.getElementsByClassName('js-search-form-close')[0];\r\n      $close.addEventListener('click', function() {\r\n        $body.classList.remove('show-search-form');\r\n\r\n        $meta_accent_color.setAttribute('content', color_accent);\r\n        $header.style.borderTopColor = color_accent;\r\n      }, false);\r\n    }\r\n\r\n  }\r\n\r\n  const Menu = new menu();\r\n\r\n// =============================================================================\r\n// HTML 機能補完\r\n// =============================================================================\r\n\r\n  class html_upgrade {\r\n\r\n    constructor() {\r\n      this.smooth_scroll();\r\n      if(document.querySelector('pre code') != null) {\r\n        this.source_highlight();\r\n      }\r\n      if(document.getElementsByTagName('video')[0] != null) {\r\n        this.inline_playing_video();\r\n      }\r\n    }\r\n\r\n    // ==================\r\n    // スムーススクロール\r\n    // ==================\r\n\r\n    // [API]\r\n    // sweet-scroll.js\r\n    // https://github.com/tsuyoshiwada/sweet-scroll\r\n\r\n    smooth_scroll() {\r\n      const sweetScroll = new SweetScroll({\r\n        trigger: '.js-scroll',   // トリガーとなる要素をCSSセレクタで指定\r\n        header: 'header',        // 固定ヘッダをCSSセレクタで指定\r\n        duration: 900,           // アニメーション再生時間のミリ秒\r\n        delay: 0,                // アニメーション開始までの遅延ミリ秒\r\n        easing: 'easeOutExpo',   // イージングのタイプ（デフォルト：easeOutQuint）\r\n        offset: 0,               // スクロール位置のオフセット\r\n        verticalScroll: true,    // 垂直方向のスクロールを許可\r\n        horizontalScroll: false, // 水平方向のスクロールを許可 (デフォルトでは無効)\r\n        stopScroll: true,        // ホイール・タッチイベントが発生した時にスクロールを停止\r\n\r\n        // Callbacks\r\n        beforeScroll: null,      // スクロールが始まる前 (return falseでキャンセル可)\r\n        afterScroll: null,       // スクロールが終わった時\r\n        cancelScroll: null       // スクロールがキャンセルされた時\r\n      });\r\n    }\r\n\r\n    // ================\r\n    // コードハイライト\r\n    // ================\r\n\r\n    // [API]\r\n    // highlight.js\r\n    // https://highlightjs.org/\r\n\r\n    source_highlight() {\r\n      hljs.initHighlightingOnLoad();\r\n    }\r\n\r\n    // ====================\r\n    // 動画のインライン再生\r\n    // ====================\r\n\r\n    inline_playing_video() {\r\n      const $video = document.getElementsByTagName('video');\r\n      for(let i = 0; i < $video.length; i ++) {\r\n        $video[i].setAttribute('webkit-playsinline', 'webkit-playsinline');\r\n      }\r\n    }\r\n\r\n  }\r\n\r\n  const HTML_upgrade = new html_upgrade();\r\n\r\n}, false);\r\n"]}