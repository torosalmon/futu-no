{"version":3,"sources":["htdocs/blog/wp-content/themes/futu-no/js/src/script.js"],"names":["supportsPassive","opts","Object","defineProperty","get","window","addEventListener","requestAnimationFrame","mozRequestAnimationFrame","webkitRequestAnimationFrame","msRequestAnimationFrame","document","e","$body","getElementsByTagName","$header","$drawer","getElementsByClassName","color_accent","getComputedStyle","borderTopColor","color_sub","$meta_accent_color","querySelector","menu","_classCallCheck","this","scroll_header","drawer","search_form","_createClass","key","value","event_interval","toggle","classList","add","remove","offset","passive","contains","$toggle","setAttribute","style","background_scroll","arg_state","timer","setInterval","pageYOffset","body","scrollHeight","innerHeight","scrollTo","scrollBy","$open","html_upgrade","smooth_scroll","inline_playing_video","trigger","header","duration","delay","easing","verticalScroll","horizontalScroll","stopScroll","beforeScroll","afterScroll","cancelScroll","i","$video","length"],"mappings":"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","file":"script.js","sourcesContent":["/*!\n * *****************************************************************************\n * [futu-no JavaScript]\n * @URL:     http://trs.mn/blog/futu-no/\n * @License: MIT License\n * *****************************************************************************\n */\n\n// =============================================================================\n// init\n// =============================================================================\n\n// Passive Event Listeners - Feature Detection\nvar supportsPassive = false;\ntry {\n\tvar opts = Object.defineProperty({}, 'passive', {\n\t\tget: function() {\n\t\t\tsupportsPassive = true;\n\t\t}\n\t});\n\twindow.addEventListener('test', null, opts);\n}\ncatch(e) {}\n\n// requestAnimationFrame - Vendor Prefix\nlet requestAnimationFrame = window.requestAnimationFrame || window.mozRequestAnimationFrame || window.webkitRequestAnimationFrame || window.msRequestAnimationFrame;\nwindow.requestAnimationFrame = requestAnimationFrame;\n\n// =============================================================================\n// DOMContentLoaded\n// =============================================================================\n\ndocument.addEventListener('DOMContentLoaded', function(e) {\n\t'use strict';\n\n\t// ==============\n\t// グローバル変数\n\t// ==============\n\n\tconst $body   = document.getElementsByTagName('body')[0];\n\tconst $header = document.getElementsByTagName('header')[0];\n\tconst $drawer = document.getElementsByClassName('drawer')[0];\n\n\t// ============\n\t// テーマカラー\n\t// ============\n\n\t// <header> border-top-colorからアクセントカラーを取得\n\tlet color_accent = getComputedStyle($header);\n\t    color_accent = color_accent.borderTopColor;\n\n\t// <.drawer> background-colorからサブカラーを取得\n\tlet color_sub = getComputedStyle($drawer);\n\t    color_sub = color_sub.backgroundColor;\n\n\t// テーマカラーセット\n\tlet $meta_accent_color = document.querySelector('meta[name=\"theme-color\"]');\n\t    $meta_accent_color.setAttribute('content', color_accent);\n\n// =============================================================================\n// メニュー\n// =============================================================================\n\n\tclass menu {\n\n\t\tconstructor() {\n\t\t\tthis.scroll_header();\n\t\t\tthis.drawer();\n\t\t\tthis.share_overlay();\n\t\t\tthis.search_form();\n\t\t}\n\n\t\t// ===============================\n\t\t// ヘッダー スクロール表示切り替え\n\t\t// ===============================\n\n\t\tscroll_header() {\n\t\t\tconst offset = 80;\t// 起動させるスクロール座標\n\n\t\t\twindow.addEventListener('scroll', event_interval, supportsPassive ? { passive: true } : false);\n\t\t\tdocument.addEventListener('touchmove', event_interval, supportsPassive ? { passive: true } : false);\n\n\t\t\tfunction event_interval() {\n\t\t\t\twindow.requestAnimationFrame(toggle);\n\t\t\t}\n\n\t\t\t// 表示切り替え\n\t\t\tfunction toggle() {\n\t\t\t\tif(window.pageYOffset > offset) {\n\t\t\t\t\t$body.classList.add('show-scroll-header');\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\t$body.classList.remove('show-scroll-header');\n\t\t\t\t}\n\t\t\t}\n\t\t\ttoggle();\n\t\t}\n\n\t\t// ========\n\t\t// ドロワー\n\t\t// ========\n\n\t\tdrawer() {\n\n\t\t\t// ============\n\t\t\t// ドロワー開閉\n\t\t\t// ============\n\n\t\t\tconst $toggle = document.getElementsByClassName('js-drawer-toggle')[0];\n\t\t\t$toggle.addEventListener('click', function() {\n\t\t\t\tif(!$body.classList.contains('show-drawer')) {\n\t\t\t\t\t$body.classList.remove('show-search-form');\n\t\t\t\t\t$body.classList.add('show-drawer');\n\n\t\t\t\t\t$meta_accent_color.setAttribute('content', color_sub);\n\t\t\t\t\t$header.style.borderTopColor = color_sub;\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\t$body.classList.remove('show-drawer');\n\n\t\t\t\t\t$meta_accent_color.setAttribute('content', color_accent);\n\t\t\t\t\t$header.style.borderTopColor = color_accent;\n\t\t\t\t}\n\t\t\t}, false);\n\t\t}\n\n\t\t// ================\n\t\t// 共有オーバーレイ\n\t\t// ================\n\n\t\tshare_overlay() {\n\n\t\t\t// ================\n\t\t\t// オーバーレイ開閉\n\t\t\t// ================\n\n\t\t\tconst $open = document.getElementsByClassName('js-share-overlay-open')[0];\n\t\t\t$open.addEventListener('click', function() {\n\t\t\t\t$body.classList.add('show-share-overlay');\n\n\t\t\t\t// 背景スクロール開始\n\t\t\t\tbackground_scroll('start');\n\t\t\t}, false);\n\n\t\t\tconst $close = document.getElementsByClassName('js-share-overlay-close')[0];\n\t\t\t$close.addEventListener('click', function() {\n\t\t\t\t$body.classList.remove('show-share-overlay');\n\n\t\t\t\t// 背景スクロール停止\n\t\t\t\tbackground_scroll('stop');\n\t\t\t}, false);\n\n\t\t\t// ==================\n\t\t\t// 背景スクロール演出\n\t\t\t// ==================\n\n\t\t\tlet timer;\n\n\t\t\tfunction background_scroll(arg_state) {\n\n\t\t\t\t// 開始\n\t\t\t\tif(arg_state === 'start') {\n\t\t\t\t\ttimer = setInterval(function() {\n\t\t\t\t\t\tif(window.pageYOffset === document.body.scrollHeight - window.innerHeight) {\n\t\t\t\t\t\t\twindow.scrollTo(0, 0);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\twindow.scrollBy(0, 1);\n\t\t\t\t\t\t}\n\t\t\t\t\t}, 30);\n\t\t\t\t}\n\n\t\t\t\t// 停止\n\t\t\t\telse if(arg_state === 'stop') {\n\t\t\t\t\tclearInterval(timer);\n\t\t\t\t}\n\t\t\t}\n\n\t\t}\n\n\t\t// ============\n\t\t// 検索フォーム\n\t\t// ============\n\n\t\tsearch_form() {\n\n\t\t\t// ============\n\t\t\t// フォーム開閉\n\t\t\t// ============\n\n\t\t\tconst $open = document.getElementsByClassName('js-search-form-open')[0];\n\t\t\t$open.addEventListener('click', function() {\n\t\t\t\t$body.classList.remove('show-drawer');\n\t\t\t\t$body.classList.add('show-search-form');\n\n\t\t\t\t$meta_accent_color.setAttribute('content', color_sub);\n\t\t\t\t$header.style.borderTopColor = color_sub;\n\t\t\t}, false);\n\n\t\t\tconst $close = document.getElementsByClassName('js-search-form-close')[0];\n\t\t\t$close.addEventListener('click', function() {\n\t\t\t\t$body.classList.remove('show-search-form');\n\n\t\t\t\t$meta_accent_color.setAttribute('content', color_accent);\n\t\t\t\t$header.style.borderTopColor = color_accent;\n\t\t\t}, false);\n\t\t}\n\n\t}\n\n\tconst Menu = new menu();\n\n// =============================================================================\n// HTML 機能補完\n// =============================================================================\n\n\tclass html_upgrade {\n\n\t\tconstructor() {\n\t\t\tthis.smooth_scroll();\n\t\t\tif(document.getElementsByTagName('video')[0] != null) {\n\t\t\t\tthis.inline_playing_video();\n\t\t\t}\n\t\t}\n\n\t\t// ==================\n\t\t// スムーススクロール\n\t\t// ==================\n\n\t\t// [API]\n\t\t// sweet-scroll.js\n\t\t// https://github.com/tsuyoshiwada/sweet-scroll\n\n\t\tsmooth_scroll() {\n\t\t\tconst sweetScroll = new SweetScroll({\n\t\t\t\ttrigger: '.js-scroll',\t\t// トリガーとなる要素をCSSセレクタで指定\n\t\t\t\theader: 'header',\t\t\t// 固定ヘッダをCSSセレクタで指定\n\t\t\t\tduration: 900,\t\t\t\t// アニメーション再生時間のミリ秒\n\t\t\t\tdelay: 0,\t\t\t\t\t// アニメーション開始までの遅延ミリ秒\n\t\t\t\teasing: 'easeOutExpo',\t\t// イージングのタイプ（デフォルト：easeOutQuint）\n\t\t\t\toffset: 0,\t\t\t\t\t// スクロール位置のオフセット\n\t\t\t\tverticalScroll: true,\t\t// 垂直方向のスクロールを許可\n\t\t\t\thorizontalScroll: false,\t// 水平方向のスクロールを許可 (デフォルトでは無効)\n\t\t\t\tstopScroll: true,\t\t\t// ホイール・タッチイベントが発生した時にスクロールを停止\n\n\t\t\t\t// Callbacks\n\t\t\t\tbeforeScroll: null,\t\t\t// スクロールが始まる前 (return falseでキャンセル可)\n\t\t\t\tafterScroll: null,\t\t\t// スクロールが終わった時\n\t\t\t\tcancelScroll: null\t\t\t// スクロールがキャンセルされた時\n\t\t\t});\n\t\t}\n\n\t\t// ====================\n\t\t// 動画のインライン再生\n\t\t// ====================\n\n\t\tinline_playing_video() {\n\t\t\tconst $video = document.getElementsByTagName('video');\n\t\t\tfor(let i = 0; i < $video.length; i ++) {\n\t\t\t\t$video[i].setAttribute('webkit-playsinline', 'webkit-playsinline');\n\t\t\t}\n\t\t}\n\n\t}\n\n\tconst HTML_upgrade = new html_upgrade();\n\n}, false);\n"]}